var serialport = require('serialport');

var dimensionsFirmware = require('../dimensionsFirmware.js');

var startTesting = require('../test/allTests.js')

var config = {
	pnpId: 'usb-Arduino__www.arduino.cc__0042_6493633303735130C261-if00'
}



serialport.list(function (e, r) {

	var foundComName = null;

	r.forEach(function (e, i, a) {
		if (e.pnpId && e.pnpId == config.pnpId) {
			
			foundComName = e.comName;
			
		}
	})

	if (foundComName) {
		startTesting (dimensionsFirmware.connect())
	} else {
		console.log ('No suitable usb was found in the returned list of connected devices.');
	}


})